Analytical dose computation algorithms like pencil beam algorithms (PB) are presently used for clinical treatment planning in intensity-modulated proton therapy. PB offer fast computation times, but are based on substantial approximations. Monte Carlo algorithms (MC) offer better accuracy, but are slower. We present a comparison of optimized treatment plans for six patients computed either with PB or MC. Both PB and MC are used during optimization, plus MC is used to recompute PB results. PB is used with different accuracy settings that define the coarseness of approximation. We evaluate the errors of PB optimized treatment plans via comparison with MC optimized plans (convergence errors) and MC recomputed plans (systematic errors) occurring for different accuracy settings of the PB. The level of lateral heterogeneities, being one of the main sources of inaccuracies of the PB, is quantified by a formula. In geometries with high levels of lateral heterogeneities, the shortcomings of PB are most obvious. For these geometries, simple PB lead to clinically significant differences and more accurate PB settings have to be used to diminish the error. The most accurate PB settings lead however to longer computing times by approximately a factor of 2 to 4 compared to PB with simple settings. Although the errors can be diminished, they cannot be fully eliminated even with sophisticated PB. Further gain in accuracy can therefore only be reached with MC in optimization. The use of MC in optimization is technically feasible, the computing times are however about 25 to 50 times longer compared to PB with most accurate settings