The method of calculation of the bremmstrahlung yield and angular distributions based on the semianalytical model described by Kovalev [Vtoricnoe izlucenie uskoritelej elektronov (Atomizdat, Moscow, 1979)] was analyzed. The specially written computer program was used to optimize the geometry of the collimators and the flattening filter design for radiation therapy purposes. The x-ray beam shaping system thus designed was installed in the 4-MeV linear Limex accelerator working at the Cancer Center in Warsaw (Poland). By comparing the calculated beam distributions with the experimental data, the agreement between theory and measurements was found to be within about +/- 3%