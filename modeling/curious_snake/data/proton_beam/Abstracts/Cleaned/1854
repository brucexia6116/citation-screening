photon virtual source model developed simulating arbitrary external beam intensity distributions using monte carlo method source model consists photon fluence grid composed matrix square elements located downstream linear accelerator target particle originating fluence map characterized seven phase space parameters position x y z direction u v w energy map reconstructed fluence energy spectra acquired modeling components linear accelerator treatment head using monte carlo code mcnp4b effect contaminant electrons accounted use derived simulation linac treatment head using code beam beam incorporated mcnp4b model sampled using dependent sampling ratio gaussian blurring kernel convolved photon fluence map account finite focal spot size scattering effects structures flattening filter mlc leaves depth dose profile source calculations photon beams NUMBER x NUMBER cm2 NUMBER x NUMBER cm2 NUMBER x NUMBER cm2 field sizes good agreement measurement acceptability criteria suggested aapm task group report NUMBER irregular field calculations compared film measurement pencil beam algorithm source model capable accurately simulating arbitrary mlc fields NUMBER cm sub source phase space NUMBER mv sub source phase space field size NUMBER mv NUMBER mv NUMBER d