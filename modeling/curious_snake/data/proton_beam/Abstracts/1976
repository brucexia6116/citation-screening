We describe a novel approach to treatment planning for heavy-ion radiotherapy based on the local effect model (LEM) which allows us to calculate the biologically effective dose not only for the target region but also for the entire irradiation volume. LEM is ideally suited for use as an integral part of treatment planning code systems for active dose shaping devices like the GSI raster scan system. Thus it has been incorporated into our standard treatment planning system for ion therapy (TRiP). Single intensity modulated fields can be optimized with respect to a homogeneous biologically effective dose. The relative biological effectiveness (RBE) is calculated separately for each voxel of the patient CT. Our radiobiologically oriented code system has been used since 1995 for the planning of irradiation experiments with cell cultures and animals such as rats and minipigs. It has been in regular and successful use for patient treatment planning since 1997