Automated range compensation for proton therapy