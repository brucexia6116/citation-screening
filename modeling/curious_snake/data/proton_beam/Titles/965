Online compensation for target motion with scanned particle beams: simulation environment